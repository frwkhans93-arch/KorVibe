<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… KorVibe - Ø§Ù„Ù…Ø´Ø±Ù</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: #0f0f0f;
            color: white;
            direction: rtl;
        }
        
        .admin-header {
            background: linear-gradient(135deg, #e50914, #b2070f);
            padding: 1.5rem;
            text-align: center;
            box-shadow: 0 4px 20px rgba(229, 9, 20, 0.3);
            position: relative;
        }
        
        .admin-nav {
            background: #1a1a1a;
            padding: 1rem;
            display: flex;
            gap: 1rem;
            overflow-x: auto;
            border-bottom: 2px solid #333;
        }
        
        .nav-btn {
            background: #333;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s;
            white-space: nowrap;
        }
        
        .nav-btn.active {
            background: #e50914;
            transform: scale(1.05);
        }
        
        .admin-content {
            padding: 2rem;
            padding-bottom: 3rem;
        }
        
        .dashboard-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }
        
        .card {
            background: linear-gradient(135deg, #1a1a1a, #2a2a2a);
            padding: 1.5rem;
            border-radius: 15px;
            border: 2px solid #333;
            text-align: center;
        }
        
        .card h3 {
            color: #e50914;
            margin-bottom: 0.5rem;
        }
        
        .card .number {
            font-size: 2.5rem;
            font-weight: bold;
            color: #ffd700;
        }
        
        .section {
            background: #1a1a1a;
            padding: 2rem;
            border-radius: 15px;
            margin: 1.5rem 0;
            display: none;
        }
        
        .section.active {
            display: block;
            animation: fadeIn 0.5s ease-in;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .form-group {
            margin: 1.2rem 0;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            color: #e50914;
            font-weight: bold;
        }
        
        input, textarea, select {
            width: 100%;
            padding: 12px;
            background: #2a2a2a;
            color: white;
            border: 2px solid #333;
            border-radius: 8px;
            font-size: 1rem;
        }
        
        input:focus, textarea:focus, select:focus {
            border-color: #e50914;
            outline: none;
        }
        
        .btn {
            background: linear-gradient(135deg, #e50914, #ff1a1a);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1rem;
            margin: 5px;
            transition: all 0.3s;
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(229, 9, 20, 0.4);
        }
        
        .btn-secondary {
            background: #333;
        }
        
        .table {
            width: 100%;
            border-collapse: collapse;
            margin: 1rem 0;
            background: #2a2a2a;
            border-radius: 10px;
            overflow: hidden;
        }
        
        .table th, .table td {
            padding: 1rem;
            text-align: right;
            border-bottom: 1px solid #333;
        }
        
        .table th {
            background: #e50914;
            color: white;
        }
        
        .table tr:hover {
            background: #333;
        }
        
        .action-btn {
            background: #333;
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 5px;
            cursor: pointer;
            margin: 0 2px;
            font-size: 0.8rem;
        }
        
        .action-btn.edit { background: #007bff; }
        .action-btn.delete { background: #dc3545; }
        .action-btn.view { background: #28a745; }
        .action-btn.email { background: #ffd700; color: #000; }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin: 1rem 0;
        }
        
        .stat-item {
            background: #2a2a2a;
            padding: 1rem;
            border-radius: 10px;
            text-align: center;
        }
        
        .logout-btn {
            position: absolute;
            left: 20px;
            top: 50%;
            transform: translateY(-50%);
            background: #dc3545;
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 20px;
            cursor: pointer;
        }
        
        .user-detail-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            z-index: 3000;
            overflow-y: auto;
        }
        
        .user-detail-content {
            background: #1a1a1a;
            margin: 50px auto;
            padding: 2rem;
            border-radius: 15px;
            width: 90%;
            max-width: 1000px;
            max-height: 90vh;
            overflow-y: auto;
        }
        
        .activity-log {
            background: #2a2a2a;
            padding: 1rem;
            border-radius: 8px;
            margin: 1rem 0;
            max-height: 300px;
            overflow-y: auto;
        }
        
        .activity-item {
            padding: 0.8rem;
            border-bottom: 1px solid #333;
            font-size: 0.9rem;
        }
        
        .badge {
            background: #e50914;
            color: white;
            padding: 2px 8px;
            border-radius: 10px;
            font-size: 0.7rem;
            margin-right: 5px;
        }
        
        .online-badge { background: #28a745; }
        .offline-badge { background: #dc3545; }
        .premium-badge { background: #ffd700; color: #000; }
        
        .tab-buttons {
            display: flex;
            gap: 0.5rem;
            margin: 1rem 0;
            flex-wrap: wrap;
        }
        
        .tab-btn {
            background: #333;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 0.9rem;
        }
        
        .tab-btn.active {
            background: #e50914;
        }
        
        .email-notification {
            background: #2a2a2a;
            padding: 1rem;
            border-radius: 8px;
            margin: 1rem 0;
            border-left: 4px solid #ffd700;
        }
    </style>
</head>
<body>
    <!-- Ù‡ÙŠØ¯Ø± Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… -->
    <header class="admin-header">
        <button class="logout-btn" onclick="logout()">ğŸšª Ø®Ø±ÙˆØ¬</button>
        <h1>ğŸ›ï¸ Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… KorVibe</h1>
        <p>Ø§Ù„ØªØ­ÙƒÙ… Ø§Ù„ÙƒØ§Ù…Ù„ ÙÙŠ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ ÙˆØ§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†</p>
    </header>
    
    <!-- Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ†Ù‚Ù„ -->
    <nav class="admin-nav">
        <button class="nav-btn active" onclick="showSection('dashboard')">ğŸ“Š Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</button>
        <button class="nav-btn" onclick="showSection('users')">ğŸ‘¥ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†</button>
        <button class="nav-btn" onclick="showSection('series')">ğŸ¬ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø³Ù„Ø³Ù„Ø§Øª</button>
        <button class="nav-btn" onclick="showSection('analytics')">ğŸ“ˆ Ø§Ù„ØªØ­Ù„ÙŠÙ„Ø§Øª</button>
        <button class="nav-btn" onclick="showSection('notifications')">ğŸ”” Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª</button>
        <button class="nav-btn" onclick="showSection('settings')">âš™ï¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª</button>
    </nav>
    
    <!-- Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ -->
    <div class="admin-content">
        
        <!-- Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© -->
        <div id="dashboard" class="section active">
            <h2>ğŸ“Š Ù†Ø¸Ø±Ø© Ø¹Ø§Ù…Ø©</h2>
            <div class="dashboard-cards">
                <div class="card">
                    <h3>ğŸ‘¥ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†</h3>
                    <div class="number" id="total-users">0</div>
                    <p>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ø§Ù„Ù…Ø³Ø¬Ù„ÙŠÙ†</p>
                </div>
                <div class="card">
                    <h3>ğŸ¬ Ø§Ù„Ù…Ø³Ù„Ø³Ù„Ø§Øª</h3>
                    <div class="number" id="total-series">0</div>
                    <p>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø³Ù„Ø³Ù„Ø§Øª Ø§Ù„Ù…Ø¶Ø§ÙØ©</p>
                </div>
                <div class="card">
                    <h3>ğŸ“º Ø§Ù„Ù…Ø´Ø§Ù‡Ø¯Ø§Øª</h3>
                    <div class="number" id="total-views">0</div>
                    <p>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ù…Ø±Ø§Øª Ø§Ù„Ù…Ø´Ø§Ù‡Ø¯Ø©</p>
                </div>
                <div class="card">
                    <h3>ğŸ’° Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª</h3>
                    <div class="number" id="total-revenue">0$</div>
                    <p>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª</p>
                </div>
            </div>
            
            <div class="stats-grid">
                <div class="stat-item">
                    <h4>ğŸ“± Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ø§Ù„Ù†Ø´Ø·ÙŠÙ†</h4>
                    <div style="font-size: 1.5rem; color: #28a745;" id="active-users">0</div>
                </div>
                <div class="stat-item">
                    <h4>â­ Ù…ØªÙˆØ³Ø· Ø§Ù„ØªÙ‚ÙŠÙŠÙ…</h4>
                    <div style="font-size: 1.5rem; color: #ffd700;" id="avg-rating">0</div>
                </div>
                <div class="stat-item">
                    <h4>ğŸ¯ Ù†Ø³Ø¨Ø© Ø§Ù„Ø§Ø­ØªÙØ§Ø¸</h4>
                    <div style="font-size: 1.5rem; color: #007bff;" id="retention-rate">0%</div>
                </div>
                <div class="stat-item">
                    <h4>ğŸ“§ Ø§Ø´ØªØ±Ø§ÙƒØ§Øª Ø§Ù„Ø¨Ø±ÙŠØ¯</h4>
                    <div style="font-size: 1.5rem; color: #ffd700;" id="email-subscribers">0</div>
                </div>
            </div>
            
            <div class="email-notification">
                <h4>ğŸ“§ Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ</h4>
                <p>Ø³ÙŠØµÙ„Ùƒ Ø¥Ø´Ø¹Ø§Ø± Ø¹Ù„Ù‰ frwkhans93@gmail.com Ø¹Ù†Ø¯ ÙƒÙ„ ØªØ³Ø¬ÙŠÙ„ Ø¬Ø¯ÙŠØ¯</p>
                <button class="btn" onclick="testEmailNotification()">ğŸ§ª Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±</button>
            </div>
        </div>
        
        <!-- Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† -->
        <div id="users" class="section">
            <h2>ğŸ‘¥ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†</h2>
            
            <div class="form-group">
                <input type="text" id="search-users" placeholder="ğŸ” Ø¨Ø­Ø« ÙÙŠ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†..." onkeyup="searchUsers()">
            </div>
            
            <table class="table">
                <thead>
                    <tr>
                        <th>Ø§Ù„Ø§Ø³Ù…</th>
                        <th>Ø§Ù„Ø¨Ø±ÙŠØ¯</th>
                        <th>Ø§Ù„Ù†Ù‚Ø§Ø·</th>
                        <th>Ø§Ù„Ù…Ø³ØªÙˆÙ‰</th>
                        <th>Ø¢Ø®Ø± Ø¯Ø®ÙˆÙ„</th>
                        <th>Ø§Ù„Ø­Ø§Ù„Ø©</th>
                        <th>Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th>
                    </tr>
                </thead>
                <tbody id="users-list">
                    <!-- Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† ÙŠØ¸Ù‡Ø±ÙˆÙ† Ù‡Ù†Ø§ -->
                </tbody>
            </table>
        </div>
        
        <!-- Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø³Ù„Ø³Ù„Ø§Øª -->
        <div id="series" class="section">
            <h2>ğŸ¬ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø³Ù„Ø³Ù„Ø§Øª</h2>
            
            <div class="form-group">
                <h3>â• Ø¥Ø¶Ø§ÙØ© Ù…Ø³Ù„Ø³Ù„ Ø¬Ø¯ÙŠØ¯</h3>
                <input type="text" id="series-title" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ø³Ù„Ø³Ù„">
                <input type="text" id="series-emoji" placeholder="Ø§Ù„Ø¥ÙŠÙ…ÙˆØ¬ÙŠ (Ù…Ø«Ø§Ù„: ğŸ’–)">
                <input type="number" id="series-rating" placeholder="Ø§Ù„ØªÙ‚ÙŠÙŠÙ… (1-5)" min="1" max="5" step="0.1">
                <input type="number" id="series-episodes" placeholder="Ø¹Ø¯Ø¯ Ø§Ù„Ø­Ù„Ù‚Ø§Øª">
                <input type="text" id="series-year" placeholder="Ø³Ù†Ø© Ø§Ù„Ø¥Ù†ØªØ§Ø¬">
                <input type="color" id="series-color" value="#ff6b6b">
                <textarea id="series-description" placeholder="ÙˆØµÙ Ø§Ù„Ù…Ø³Ù„Ø³Ù„" rows="3"></textarea>
                <button class="btn" onclick="addSeries()">Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ø³Ù„Ø³Ù„</button>
            </div>
            
            <h3>ğŸ“‹ Ø§Ù„Ù…Ø³Ù„Ø³Ù„Ø§Øª Ø§Ù„Ù…Ø¶Ø§ÙØ©</h3>
            <div class="table-container">
                <table class="table">
                    <thead>
                        <tr>
                            <th>Ø§Ù„Ø¥ÙŠÙ…ÙˆØ¬ÙŠ</th>
                            <th>Ø§Ø³Ù… Ø§Ù„Ù…Ø³Ù„Ø³Ù„</th>
                            <th>Ø§Ù„ØªÙ‚ÙŠÙŠÙ…</th>
                            <th>Ø§Ù„Ø­Ù„Ù‚Ø§Øª</th>
                            <th>Ø§Ù„Ù…Ø´Ø§Ù‡Ø¯Ø§Øª</th>
                            <th>Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th>
                        </tr>
                    </thead>
                    <tbody id="series-list">
                        <!-- Ø§Ù„Ù…Ø³Ù„Ø³Ù„Ø§Øª ØªØ¸Ù‡Ø± Ù‡Ù†Ø§ -->
                    </tbody>
                </table>
            </div>
        </div>
        
        <!-- Ø§Ù„ØªØ­Ù„ÙŠÙ„Ø§Øª -->
        <div id="analytics" class="section">
            <h2>ğŸ“ˆ Ø§Ù„ØªØ­Ù„ÙŠÙ„Ø§Øª ÙˆØ§Ù„ØªÙ‚Ø§Ø±ÙŠØ±</h2>
            
            <div class="stats-grid">
                <div class="stat-item">
                    <h4>ğŸ“… Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ø¬Ø¯Ø¯ Ø§Ù„ÙŠÙˆÙ…</h4>
                    <div style="font-size: 1.5rem; color: #28a745;" id="new-users-today">0</div>
                </div>
                <div class="stat-item">
                    <h4>ğŸ¬ Ù…Ø´Ø§Ù‡Ø¯Ø§Øª Ø§Ù„ÙŠÙˆÙ…</h4>
                    <div style="font-size: 1.5rem; color: #007bff;" id="views-today">0</div>
                </div>
                <div class="stat-item">
                    <h4>ğŸ’° Ø¥ÙŠØ±Ø§Ø¯Ø§Øª Ø§Ù„ÙŠÙˆÙ…</h4>
                    <div style="font-size: 1.5rem; color: #ffd700;" id="revenue-today">0$</div>
                </div>
                <div class="stat-item">
                    <h4>ğŸ“Š Ù…ØªÙˆØ³Ø· Ø§Ù„Ø¬Ù„Ø³Ø©</h4>
                    <div style="font-size: 1.5rem; color: #e50914;" id="avg-session">0 Ø¯</div>
                </div>
            </div>
            
            <div class="form-group">
                <h4>ğŸ“‹ ØªÙ‚Ø±ÙŠØ± Ø§Ù„Ù†Ø´Ø§Ø·</h4>
                <div class="activity-log" id="activity-log">
                    <!-- Ø³Ø¬Ù„ Ø§Ù„Ù†Ø´Ø§Ø· -->
                </div>
            </div>
            
            <button class="btn" onclick="generateReport()">ğŸ“¥ ØªØµØ¯ÙŠØ± ØªÙ‚Ø±ÙŠØ±</button>
            <button class="btn btn-secondary" onclick="sendDailyReport()">ğŸ“§ Ø¥Ø±Ø³Ø§Ù„ ØªÙ‚Ø±ÙŠØ± ÙŠÙˆÙ…ÙŠ</button>
        </div>
        
        <!-- Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª -->
        <div id="notifications" class="section">
            <h2>ğŸ”” Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª</h2>
            
            <div class="form-group">
                <h4>ğŸ“§ Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ</h4>
                <label>
                    <input type="checkbox" id="email-new-users" checked>
                    Ø¥Ø´Ø¹Ø§Ø± Ø¹Ù†Ø¯ ØªØ³Ø¬ÙŠÙ„ Ù…Ø³ØªØ®Ø¯Ù… Ø¬Ø¯ÙŠØ¯
                </label>
                <br>
                <label>
                    <input type="checkbox" id="email-payments">
                    Ø¥Ø´Ø¹Ø§Ø± Ø¹Ù†Ø¯ Ø¹Ù…Ù„ÙŠØ§Øª Ø§Ù„Ø¯ÙØ¹
                </label>
                <br>
                <label>
                    <input type="checkbox" id="email-reports">
                    Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ± Ø§Ù„ÙŠÙˆÙ…ÙŠØ©
                </label>
            </div>
            
            <div class="form-group">
                <h4>ğŸ”” Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ø§Ù„ØªØ·Ø¨ÙŠÙ‚</h4>
                <input type="text" id="notification-title" placeholder="Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±">
                <textarea id="notification-message" placeholder="Ù†Øµ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±" rows="3"></textarea>
                <button class="btn" onclick="sendNotificationToAll()">ğŸ“¤ Ø¥Ø±Ø³Ø§Ù„ Ù„Ù„Ø¬Ù…ÙŠØ¹</button>
            </div>
        </div>
        
        <!-- Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª -->
        <div id="settings" class="section">
            <h2>âš™ï¸ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù†Ø¸Ø§Ù…</h2>
            
            <div class="form-group">
                <h4>ğŸ¯ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„ØªØ·Ø¨ÙŠÙ‚</h4>
                <label>Ø§Ø³Ù… Ø§Ù„ØªØ·Ø¨ÙŠÙ‚:</label>
                <input type="text" id="app-name" value="KorVibe">
                
                <label>ÙˆØµÙ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚:</label>
                <textarea id="app-description" rows="2">Ù…Ø³Ù„Ø³Ù„Ø§Øª ÙƒÙˆØ±ÙŠØ© ÙÙŠ Ù…Ù‚Ø§Ø·Ø¹ Ù‚ØµÙŠØ±Ø©</textarea>
                
                <label>Ø³Ø¹Ø± Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ Ø§Ù„Ø´Ù‡Ø±ÙŠ ($):</label>
                <input type="number" id="subscription-price" value="5">
                
                <label>Ø¹Ø¯Ø¯ Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª Ø¨ÙŠÙ† Ø§Ù„Ù…Ù‚Ø§Ø·Ø¹:</label>
                <input type="number" id="ads-frequency" value="2" min="1" max="10">
            </div>
            
            <div class="form-group">
                <h4>ğŸ¨ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù…Ø¸Ù‡Ø±</h4>
                <label>Ø§Ù„Ù„ÙˆÙ† Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ:</label>
                <input type="color" id="primary-color" value="#e50914">
                
                <label>Ù„ÙˆÙ† Ø§Ù„Ø®Ù„ÙÙŠØ©:</label>
                <input type="color" id="bg-color" value="#0f0f0f">
            </div>
            
            <button class="btn" onclick="saveSettings()">ğŸ’¾ Ø­ÙØ¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª</button>
            <button class="btn btn-secondary" onclick="resetSettings()">ğŸ”„ Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ†</button>
        </div>
    </div>
    
    <!-- Ù†Ø§ÙØ°Ø© ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… -->
    <div class="user-detail-modal" id="user-detail-modal">
        <div class="user-detail-content">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem;">
                <h2 id="user-detail-name">ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…</h2>
                <button onclick="closeUserDetail()" style="background: none; border: none; color: white; font-size: 1.5rem; cursor: pointer;">âœ•</button>
            </div>
            
            <div class="tab-buttons">
                <button class="tab-btn active" onclick="showUserTab('info')">ğŸ“Š Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª</button>
                <button class="tab-btn" onclick="showUserTab('activity')">ğŸ“ˆ Ø§Ù„Ù†Ø´Ø§Ø·</button>
                <button class="tab-btn" onclick="showUserTab('watch')">ğŸ¬ Ø§Ù„Ù…Ø´Ø§Ù‡Ø¯Ø§Øª</button>
                <button class="tab-btn" onclick="showUserTab('friends')">ğŸ‘¥ Ø§Ù„Ø£ØµØ¯Ù‚Ø§Ø¡</button>
                <button class="tab-btn" onclick="showUserTab('payments')">ğŸ’³ Ø§Ù„Ù…Ø¯ÙÙˆØ¹Ø§Øª</button>
            </div>
            
            <div id="user-info-tab" class="tab-content">
                <div class="stats-grid">
                    <div class="stat-item">
                        <h4>ğŸª™ Ø§Ù„Ù†Ù‚Ø§Ø·</h4>
                        <div id="user-detail-points">0</div>
                    </div>
                    <div class="stat-item">
                        <h4>â­ Ø§Ù„Ù…Ø³ØªÙˆÙ‰</h4>
                        <div id="user-detail-level">1</div>
                    </div>
                    <div class="stat-item">
                        <h4>ğŸ“º Ø§Ù„Ù…Ø´Ø§Ù‡Ø¯Ø§Øª</h4>
                        <div id="user-detail-views">0</div>
                    </div>
                    <div class="stat-item">
                        <h4>ğŸ’µ Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¯ÙØ¹</h4>
                        <div id="user-detail-payments">0$</div>
                    </div>
                </div>
                
                <div class="form-group">
                    <h4>ğŸ“§ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø§ØªØµØ§Ù„</h4>
                    <p>Ø§Ù„Ø¨Ø±ÙŠØ¯: <span id="user-detail-email"></span></p>
                    <p>ØªØ§Ø±ÙŠØ® Ø§Ù„ØªØ³Ø¬ÙŠÙ„: <span id="user-detail-joined"></span></p>
                    <p>Ø¢Ø®Ø± Ø¯Ø®ÙˆÙ„: <span id="user-detail-lastlogin"></span></p>
                </div>
            </div>
            
            <div id="user-activity-tab" class="tab-content" style="display: none;">
                <h4>ğŸ“Š Ø³Ø¬Ù„ Ø§Ù„Ù†Ø´Ø§Ø·</h4>
                <div class="activity-log" id="user-activity-log">
                    <!-- Ù†Ø´Ø§Ø· Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… -->
                </div>
            </div>
            
            <div id="user-watch-tab" class="tab-content" style="display: none;">
                <h4>ğŸ¬ Ø³Ø¬Ù„ Ø§Ù„Ù…Ø´Ø§Ù‡Ø¯Ø§Øª</h4>
                <div class="activity-log" id="user-watch-history">
                    <!-- Ù…Ø´Ø§Ù‡Ø¯Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… -->
                </div>
            </div>
            
            <div id="user-friends-tab" class="tab-content" style="display: none;">
                <h4>ğŸ‘¥ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø£ØµØ¯Ù‚Ø§Ø¡</h4>
                <div id="user-friends-list">
                    <!-- Ø£ØµØ¯Ù‚Ø§Ø¡ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… -->
                </div>
            </div>
            
            <div id="user-payments-tab" class="tab-content" style="display: none;">
                <h4>ğŸ’³ Ø³Ø¬Ù„ Ø§Ù„Ù…Ø¯ÙÙˆØ¹Ø§Øª</h4>
                <div id="user-payments-history">
                    <!-- Ù…Ø¯ÙÙˆØ¹Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… -->
                </div>
            </div>
        </div>
    </div>

    <script>
        // Ù†Ø¸Ø§Ù… Ø¥Ø¯Ø§Ø±Ø© Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… Ø§Ù„Ù…ØªÙƒØ§Ù…Ù„
        class AdminManager {
            constructor() {
                this.users = JSON.parse(localStorage.getItem('korvibe_users') || '[]');
                this.series = JSON.parse(localStorage.getItem('korvibe_series') || '[]');
                this.activities = JSON.parse(localStorage.getItem('korvibe_activities') || '[]');
                this.settings = JSON.parse(localStorage.getItem('korvibe_settings') || this.getDefaultSettings());
                this.watchHistory = JSON.parse(localStorage.getItem('korvibe_watchHistory') || '[]');
                this.payments = JSON.parse(localStorage.getItem('korvibe_payments') || '[]');
                this.friends = JSON.parse(localStorage.getItem('korvibe_friends') || '[]');
                
                this.adminEmail = "frwkhans93@gmail.com";
                this.currentViewingUser = null;
                
                this.loadDashboard();
            }
            
            getDefaultSettings() {
                return {
                    appName: "KorVibe",
                    appDescription: "Ù…Ø³Ù„Ø³Ù„Ø§Øª ÙƒÙˆØ±ÙŠØ© ÙÙŠ Ù…Ù‚Ø§Ø·Ø¹ Ù‚ØµÙŠØ±Ø©",
                    subscriptionPrice: 5,
                    adsFrequency: 2,
                    primaryColor: "#e50914",
                    bgColor: "#0f0f0f",
                    emailNotifications: true,
                    autoReports: false
                };
            }
            
            loadDashboard() {
                // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª
                this.updateStatistics();
                this.loadUsersList();
                this.loadSeriesList();
                this.loadActivityLog();
                this.loadSettings();
            }
            
            updateStatistics() {
                document.getElementById('total-users').textContent = this.users.length;
                document.getElementById('total-series').textContent = this.series.length;
                document.getElementById('total-views').textContent = this.watchHistory.length;
                document.getElementById('total-revenue').textContent = this.payments.reduce((sum, p) => sum + p.amount, 0) + "$";
                
                document.getElementById('active-users').textContent = this.users.filter(u => this.isUserActive(u)).length;
                document.getElementById('avg-rating').textContent = this.series.length > 0 ? 
                    (this.series.reduce((sum, s) => sum + s.rating, 0) / this.series.length).toFixed(1) : "0";
                document.getElementById('retention-rate').textContent = this.calculateRetentionRate() + "%";
                document.getElementById('email-subscribers').textContent = this.users.filter(u => u.emailNotifications !== false).length;
                
                // Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„ÙŠÙˆÙ…
                const today = new Date().toDateString();
                document.getElementById('new-users-today').textContent = this.users.filter(u => 
                    new Date(u.joinedAt).toDateString() === today
                ).length;
                
                document.getElementById('views-today').textContent = this.watchHistory.filter(w => 
                    new Date(w.timestamp).toDateString() === today
                ).length;
                
                document.getElementById('revenue-today').textContent = this.payments.filter(p => 
                    new Date(p.date).toDateString() === today
                ).reduce((sum, p) => sum + p.amount, 0) + "$";
                
                document.getElementById('avg-session').textContent = this.calculateAverageSession() + " Ø¯";
            }
            
            isUserActive(user) {
                const lastLogin = new Date(user.lastLogin);
                const today = new Date();
                return (today - lastLogin) < (7 * 24 * 60 * 60 * 1000);
            }
            
            calculateRetentionRate() {
                const totalUsers = this.users.length;
                const activeUsers = this.users.filter(u => this.isUserActive(u)).length;
                return totalUsers > 0 ? Math.round((activeUsers / totalUsers) * 100) : 0;
            }
            
            calculateAverageSession() {
                // Ù…Ø­Ø§ÙƒØ§Ø© Ù…ØªÙˆØ³Ø· Ø§Ù„Ø¬Ù„Ø³Ø©
                return Math.floor(Math.random() * 15) + 5;
            }
            
            // Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†
            loadUsersList() {
                const container = document.getElementById('users-list');
                container.innerHTML = this.users.map(user => `
                    <tr>
                        <td>
                            <strong>${user.name}</strong>
                            ${user.isAdmin ? '<span class="badge">ğŸ‘‘ Ù…Ø´Ø±Ù</span>' : ''}
                            ${user.isPremium ? '<span class="badge premium-badge">ğŸ’ Ù…Ù…ÙŠØ²</span>' : ''}
                        </td>
                        <td>${user.email}</td>
                        <td>${user.points || 0}</td>
                        <td>${user.level || 1}</td>
                        <td>${new Date(user.lastLogin).toLocaleDateString('ar-EG')}</td>
                        <td>
                            <span class="badge ${this.isUserActive(user) ? 'online-badge' : 'offline-badge'}">
                                ${this.isUserActive(user) ? 'ğŸŸ¢ Ù†Ø´Ø·' : 'ğŸ”´ ØºÙŠØ± Ù†Ø´Ø·'}
                            </span>
                        </td>
                        <td>
                            <button class="action-btn view" onclick="adminManager.viewUserDetail(${user.id})">Ø¹Ø±Ø¶</button>
                            <button class="action-btn email" onclick="adminManager.sendEmailToUser('${user.email}')">ğŸ“§</button>
                            <button class="action-btn edit" onclick="adminManager.editUser(${user.id})">ØªØ¹Ø¯ÙŠÙ„</button>
                        </td>
                    </tr>
                `).join('');
            }
            
            viewUserDetail(userId) {
                this.currentViewingUser = this.users.find(u => u.id === userId);
                if (!this.currentViewingUser) return;
                
                // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©
                document.getElementById('user-detail-name').textContent = this.currentViewingUser.name;
                document.getElementById('user-detail-points').textContent = this.currentViewingUser.points || 0;
                document.getElementById('user-detail-level').textContent = this.currentViewingUser.level || 1;
                document.getElementById('user-detail-views').textContent = this.watchHistory.filter(w => w.userId === userId).length;
                document.getElementById('user-detail-payments').textContent = this.payments.filter(p => p.userId === userId).reduce((sum, p) => sum + p.amount, 0) + "$";
                document.getElementById('user-detail-email').textContent = this.currentViewingUser.email;
                document.getElementById('user-detail-joined').textContent = new Date(this.currentViewingUser.joinedAt).toLocaleDateString('ar-EG');
                document.getElementById('user-detail-lastlogin').textContent = new Date(this.currentViewingUser.lastLogin).toLocaleDateString('ar-EG');
                
                // ØªØ­Ù…ÙŠÙ„ Ø³Ø¬Ù„ Ø§Ù„Ù†Ø´Ø§Ø·
                this.loadUserActivity(userId);
                this.loadUserWatchHistory(userId);
                this.loadUserFriends(userId);
                this.loadUserPayments(userId);
                
                // Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ù†Ø§ÙØ°Ø©
                document.getElementById('user-detail-modal').style.display = 'block';
                this.showUserTab('info');
            }
            
            loadUserActivity(userId) {
                const userActivities = this.activities.filter(a => a.data.email === this.currentViewingUser.email);
                const container = document.getElementById('user-activity-log');
                
                container.innerHTML = userActivities.slice(-20).map(activity => `
                    <div class="activity-item">
                        <strong>${this.getActivityTypeText(activity.type)}</strong>
                        <div style="color: #ccc; font-size: 0.8rem;">${new Date(activity.timestamp).toLocaleString('ar-EG')}</div>
                        ${activity.data.reason ? `<div style="color: #ff6b6b;">Ø³Ø¨Ø¨: ${activity.data.reason}</div>` : ''}
                    </div>
                `).join('');
            }
            
            loadUserWatchHistory(userId) {
                const userWatchHistory = this.watchHistory.filter(w => w.userId === userId);
                const container = document.getElementById('user-watch-history');
                
                container.innerHTML = userWatchHistory.slice(-10).map(watch => {
                    const series = this.series.find(s => s.id === watch.seriesId);
                    return `
                        <div class="activity-item">
                            <strong>${series ? series.title : 'Ù…Ø³Ù„Ø³Ù„ Ù…Ø­Ø°ÙˆÙ'}</strong>
                            <div style="color: #ccc; font-size: 0.8rem;">${new Date(watch.timestamp).toLocaleString('ar-EG')}</div>
                        </div>
                    `;
                }).join('');
            }
            
            loadUserFriends(userId) {
                const userFriends = this.friends.filter(f => f.userId === userId);
                const container = document.getElementById('user-friends-list');
                
                container.innerHTML = userFriends.length > 0 ? 
                    userFriends.map(friend => {
                        const friendUser = this.users.find(u => u.id === friend.friendId);
                        return `
                            <div class="activity-item">
                                <strong>${friendUser ? friendUser.name : 'Ù…Ø³ØªØ®Ø¯Ù… Ù…Ø­Ø°ÙˆÙ'}</strong>
                                <span class="badge ${this.isUserActive(friendUser) ? 'online-badge' : 'offline-badge'}">
                                    ${this.isUserActive(friendUser) ? 'ğŸŸ¢' : 'ğŸ”´'}
                                </span>
                                <div style="color: #ccc; font-size: 0.8rem;">ØªØ§Ø±ÙŠØ® Ø§Ù„ØµØ¯Ø§Ù‚Ø©: ${new Date(friend.date).toLocaleDateString('ar-EG')}</div>
                            </div>
                        `;
                    }).join('') :
                    '<div style="text-align: center; color: #ccc; padding: 2rem;">Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø£ØµØ¯Ù‚Ø§Ø¡</div>';
            }
            
            loadUserPayments(userId) {
                const userPayments = this.payments.filter(p => p.userId === userId);
                const container = document.getElementById('user-payments-history');
                
                container.innerHTML = userPayments.length > 0 ? 
                    userPayments.map(payment => `
                        <div class="activity-item">
                            <strong>ğŸ’° ${payment.amount}$ - ${payment.type === 'subscription' ? 'Ø§Ø´ØªØ±Ø§Ùƒ' : 'Ø´Ø±Ø§Ø¡ Ù†Ù‚Ø§Ø·'}</strong>
                            <div style="color: #ccc; font-size: 0.8rem;">${new Date(payment.date).toLocaleString('ar-EG')}</div>
                            ${payment.method ? `<div style="color: #28a745;">Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¯ÙØ¹: ${payment.method}</div>` : ''}
                        </div>
                    `).join('') :
                    '<div style="text-align: center; color: #ccc; padding: 2rem;">Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ø¯ÙÙˆØ¹Ø§Øª</div>';
            }
            
            getActivityTypeText(type) {
                const types = {
                    'user_registered': 'ğŸ“ ØªØ³Ø¬ÙŠÙ„ Ù…Ø³ØªØ®Ø¯Ù… Ø¬Ø¯ÙŠØ¯',
                    'login_success': 'ğŸ” ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„ Ù†Ø§Ø¬Ø­',
                    'login_failed': 'âŒ Ù…Ø­Ø§ÙˆÙ„Ø© Ø¯Ø®ÙˆÙ„ ÙØ§Ø´Ù„Ø©',
                    'logout': 'ğŸšª ØªØ³Ø¬ÙŠÙ„ Ø®Ø±ÙˆØ¬',
                    'video_watched': 'ğŸ¬ Ù…Ø´Ø§Ù‡Ø¯Ø© ÙÙŠØ¯ÙŠÙˆ',
                    'ad_watched': 'ğŸª Ù…Ø´Ø§Ù‡Ø¯Ø© Ø¥Ø¹Ù„Ø§Ù†',
                    'payment_success': 'ğŸ’³ Ø¹Ù…Ù„ÙŠØ© Ø¯ÙØ¹ Ù†Ø§Ø¬Ø­Ø©'
                };
                return types[type] || type;
            }
            
            searchUsers() {
                const searchTerm = document.getElementById('search-users').value.toLowerCase();
                const filteredUsers = this.users.filter(user => 
                    user.name.toLowerCase().includes(searchTerm) || 
                    user.email.toLowerCase().includes(searchTerm)
                );
                
                const container = document.getElementById('users-list');
                container.innerHTML = filteredUsers.map(user => `
                    <tr>
                        <td>
                            <strong>${user.name}</strong>
                            ${user.isAdmin ? '<span class="badge">ğŸ‘‘ Ù…Ø´Ø±Ù</span>' : ''}
                            ${user.isPremium ? '<span class="badge premium-badge">ğŸ’ Ù…Ù…ÙŠØ²</span>' : ''}
                        </td>
                        <td>${user.email}</td>
                        <td>${user.points || 0}</td>
                        <td>${user.level || 1}</td>
                        <td>${new Date(user.lastLogin).toLocaleDateString('ar-EG')}</td>
                        <td>
                            <span class="badge ${this.isUserActive(user) ? 'online-badge' : 'offline-badge'}">
                                ${this.isUserActive(user) ? 'ğŸŸ¢ Ù†Ø´Ø·' : 'ğŸ”´ ØºÙŠØ± Ù†Ø´Ø·'}
                            </span>
                        </td>
                        <td>
                            <button class="action-btn view" onclick="adminManager.viewUserDetail(${user.id})">Ø¹Ø±Ø¶</button>
                            <button class="action-btn email" onclick="adminManager.sendEmailToUser('${user.email}')">ğŸ“§</button>
                            <button class="action-btn edit" onclick="adminManager.editUser(${user.id})">ØªØ¹Ø¯ÙŠÙ„</button>
                        </td>
                    </tr>
                `).join('');
            }
            
            sendEmailToUser(email) {
                const subject = prompt("Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ:");
                const message = prompt("Ù†Øµ Ø§Ù„Ø±Ø³Ø§Ù„Ø©:");
                
                if (subject && message) {
                    // ÙÙŠ Ø§Ù„ÙˆØ§Ù‚Ø¹ØŒ Ù‡Ù†Ø§ Ø³ØªØªÙƒØ§Ù…Ù„ Ù…Ø¹ Ø®Ø¯Ù…Ø© Ø§Ù„Ø¨Ø±ÙŠØ¯
                    this.logActivity('admin_email_sent', { to: email, subject, message });
                    alert(`ğŸ“§ ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø¨Ø±ÙŠØ¯ Ø¥Ù„Ù‰ ${email}`);
                    
                    // Ù…Ø­Ø§ÙƒØ§Ø© Ø¥Ø±Ø³Ø§Ù„ Ø¥Ø´Ø¹Ø§Ø± Ù„Ù„Ù…Ø´Ø±Ù
                    this.sendAdminNotification(`ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø¨Ø±ÙŠØ¯ Ø¥Ù„Ù‰ ${email}`);
                }
            }
            
            sendAdminNotification(message) {
                // Ø¥Ø´Ø¹Ø§Ø± ÙˆÙ‡Ù…ÙŠ - ÙÙŠ Ø§Ù„ÙˆØ§Ù‚Ø¹ Ø³ÙŠØ±Ø³Ù„ Ø¨Ø±ÙŠØ¯ Ø­Ù‚ÙŠÙ‚ÙŠ
                console.log(`ğŸ“§ Ø¥Ø´Ø¹Ø§Ø± Ù„Ù„Ù…Ø´Ø±Ù: ${message}`);
                alert(`ğŸ“§ Ø³ÙŠØµÙ„Ùƒ Ø¥Ø´Ø¹Ø§Ø± Ø¹Ù„Ù‰ ${this.adminEmail}: ${message}`);
            }
            
            // Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø³Ù„Ø³Ù„Ø§Øª
            addSeries() {
                const series = {
                    id: Date.now(),
                    title: document.getElementById('series-title').value,
                    emoji: document.getElementById('series-emoji').value,
                    rating: parseFloat(document.getElementById('series-rating').value),
                    episodes: parseInt(document.getElementById('series-episodes').value),
                    year: document.getElementById('series-year').value,
                    color: document.getElementById('series-color').value,
                    description: document.getElementById('series-description').value,
                    views: 0,
                    addedAt: new Date().toISOString(),
                    isNew: true
                };
                
                this.series.push(series);
                this.saveSeries();
                this.loadSeriesList();
                this.clearSeriesForm();
                
                this.logActivity('series_added', { title: series.title });
                alert('ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ø³Ù„Ø³Ù„ Ø¨Ù†Ø¬Ø§Ø­!');
            }
            
            loadSeriesList() {
                const container = document.getElementById('series-list');
                container.innerHTML = this.series.map(series => `
                    <tr>
                        <td>${series.emoji}</td>
                        <td>${series.title}</td>
                        <td>${'â˜…'.repeat(Math.floor(series.rating))}${'â˜†'.repeat(5-Math.floor(series.rating))} ${series.rating}</td>
                        <td>${series.episodes}</td>
                        <td>${series.views || 0}</td>
                        <td>
                            <button class="action-btn edit" onclick="adminManager.editSeries(${series.id})">ØªØ¹Ø¯ÙŠÙ„</button>
                            <button class="action-btn delete" onclick="adminManager.deleteSeries(${series.id})">Ø­Ø°Ù</button>
                        </td>
                    </tr>
                `).join('');
            }
            
            // Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª
            loadSettings() {
                document.getElementById('app-name').value = this.settings.appName;
                document.getElementById('app-description').value = this.settings.appDescription;
                document.getElementById('subscription-price').value = this.settings.subscriptionPrice;
                document.getElementById('ads-frequency').value = this.settings.adsFrequency;
                document.getElementById('primary-color').value = this.settings.primaryColor;
                document.getElementById('bg-color').value = this.settings.bgColor;
                document.getElementById('email-new-users').checked = this.settings.emailNotifications;
            }
            
            saveSettings() {
                this.settings = {
                    appName: document.getElementById('app-name').value,
                    appDescription: document.getElementById('app-description').value,
                    subscriptionPrice: parseFloat(document.getElementById('subscription-price').value),
                    adsFrequency: parseInt(document.getElementById('ads-frequency').value),
                    primaryColor: document.getElementById('primary-color').value,
                    bgColor: document.getElementById('bg-color').value,
                    emailNotifications: document.getElementById('email-new-users').checked
                };
                
                this.save();
                alert('ØªÙ… Ø­ÙØ¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø¨Ù†Ø¬Ø§Ø­!');
            }
            
            // Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ±
            loadActivityLog() {
                const container = document.getElementById('activity-log');
                container.innerHTML = this.activities.slice(-20).map(activity => `
                    <div class="activity-item">
                        <strong>${this.getActivityTypeText(activity.type)}</strong>
                        <div style="color: #ccc; font-size: 0.8rem;">
                            ${new Date(activity.timestamp).toLocaleString('ar-EG')} | 
                            ${activity.data.email || 'Ø§Ù„Ù†Ø¸Ø§Ù…'}
                        </div>
                    </div>
                `).join('');
            }
            
            generateReport() {
                const report = `
ØªÙ‚Ø±ÙŠØ± KorVibe - ${new Date().toLocaleDateString('ar-EG')}

ğŸ‘¥ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†: ${this.users.length}
ğŸ¬ Ø§Ù„Ù…Ø³Ù„Ø³Ù„Ø§Øª: ${this.series.length}
ğŸ“º Ø§Ù„Ù…Ø´Ø§Ù‡Ø¯Ø§Øª: ${this.watchHistory.length}
ğŸ’° Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª: ${this.payments.reduce((sum, p) => sum + p.amount, 0)}$

ğŸ“ˆ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ø§Ù„Ù†Ø´Ø·ÙŠÙ†: ${this.users.filter(u => this.isUserActive(u)).length}
â­ Ù…ØªÙˆØ³Ø· Ø§Ù„ØªÙ‚ÙŠÙŠÙ…: ${this.series.length > 0 ? (this.series.reduce((sum, s) => sum + s.rating, 0) / this.series.length).toFixed(1) : "0"}
ğŸ¯ Ù†Ø³Ø¨Ø© Ø§Ù„Ø§Ø­ØªÙØ§Ø¸: ${this.calculateRetentionRate()}%

ğŸ“Š Ù†Ø´Ø§Ø· Ø§Ù„ÙŠÙˆÙ…:
- Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ø¬Ø¯Ø¯: ${this.users.filter(u => new Date(u.joinedAt).toDateString() === new Date().toDateString()).length}
- Ù…Ø´Ø§Ù‡Ø¯Ø§Øª: ${this.watchHistory.filter(w => new Date(w.timestamp).toDateString() === new Date().toDateString()).length}
- Ø¥ÙŠØ±Ø§Ø¯Ø§Øª: ${this.payments.filter(p => new Date(p.date).toDateString() === new Date().toDateString()).reduce((sum, p) => sum + p.amount, 0)}$
                `.trim();
                
                alert('ğŸ“¥ ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ØªÙ‚Ø±ÙŠØ±:\n\n' + report);
            }
            
            sendDailyReport() {
                this.generateReport();
                this.sendAdminNotification("ğŸ“Š ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ØªÙ‚Ø±ÙŠØ± Ø§Ù„ÙŠÙˆÙ…ÙŠ");
            }
            
            testEmailNotification() {
                this.sendAdminNotification("ğŸ§ª Ù‡Ø°Ø§ Ø§Ø®ØªØ¨Ø§Ø± Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ");
            }
            
            // Ø£Ø¯ÙˆØ§Øª Ù…Ø³Ø§Ø¹Ø¯Ø©
            clearSeriesForm() {
                document.getElementById('series-title').value = '';
                document.getElementById('series-emoji').value = '';
                document.getElementById('series-rating').value = '';
                document.getElementById('series-episodes').value = '';
                document.getElementById('series-year').value = '';
                document.getElementById('series-color').value = '#ff6b6b';
                document.getElementById('series-description').value = '';
            }
            
            logActivity(type, data) {
                this.activities.push({
                    type,
                    data,
                    timestamp: new Date().toISOString(),
                    userAgent: navigator.userAgent
                });
                
                if (this.activities.length > 500) {
                    this.activities.shift();
                }
                
                this.saveActivities();
                this.loadActivityLog();
            }
            
            // Ø¯ÙˆØ§Ù„ Ø§Ù„Ø­ÙØ¸
            save() {
                localStorage.setItem('korvibe_settings', JSON.stringify(this.settings));
            }
            
            saveSeries() {
                localStorage.setItem('korvibe_series', JSON.stringify(this.series));
            }
            
            saveActivities() {
                localStorage.setItem('korvibe_activities', JSON.stringify(this.activities));
            }
        }

        // Ø¥Ù†Ø´Ø§Ø¡ Ù…Ø¯ÙŠØ± Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©
        const adminManager = new AdminManager();

        // Ø¯ÙˆØ§Ù„ Ø§Ù„ÙˆØ§Ø¬Ù‡Ø©
        function showSection(sectionId) {
            document.querySelectorAll('.section').forEach(section => {
                section.classList.remove('active');
            });
            document.getElementById(sectionId).classList.add('active');
            
            document.querySelectorAll('.nav-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            const navBtns = document.querySelectorAll('.nav-btn');
            for (let btn of navBtns) {
                if (btn.onclick && btn.onclick.toString().includes(sectionId)) {
                    btn.classList.add('active');
                    break;
                }
            }
        }

        function showUserTab(tabId) {
            // Ø¥Ø®ÙØ§Ø¡ ÙƒÙ„ Ø§Ù„ØªØ¨ÙˆÙŠØ¨Ø§Øª
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.style.display = 'none';
            });
            
            // Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„ØªØ¨ÙˆÙŠØ¨ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨
            document.getElementById(`user-${tabId}-tab`).style.display = 'block';
            
            // ØªØ­Ø¯ÙŠØ« Ø£Ø²Ø±Ø§Ø± Ø§Ù„ØªØ¨ÙˆÙŠØ¨Ø§Øª
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
        }

        function closeUserDetail() {
            document.getElementById('user-detail-modal').style.display = 'none';
        }

        function searchUsers() {
            adminManager.searchUsers();
        }

        function addSeries() {
            adminManager.addSeries();
        }

        function saveSettings() {
            adminManager.saveSettings();
        }

        function resetSettings() {
            if (confirm('Ù‡Ù„ ØªØ±ÙŠØ¯ Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§ØªØŸ')) {
                adminManager.settings = adminManager.getDefaultSettings();
                adminManager.loadSettings();
                adminManager.save();
                alert('ØªÙ… Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª!');
            }
        }

        function generateReport() {
            adminManager.generateReport();
        }

        function sendDailyReport() {
            adminManager.sendDailyReport();
        }

        function testEmailNotification() {
            adminManager.testEmailNotification();
        }

        function sendNotificationToAll() {
            alert('ğŸ“¤ Ø³ÙŠØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø¥Ø´Ø¹Ø§Ø± Ù„Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†');
        }

        function logout() {
            if (confirm('Ù‡Ù„ ØªØ±ÙŠØ¯ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬ Ù…Ù† Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…ØŸ')) {
                window.location.href = 'login.html';
            }
        }

        // Ø¯ÙˆØ§Ù„ Ù…Ø­Ø§ÙƒØ§Ø©
        function editUser(id) {
            alert(`ğŸš§ ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ${id} - Ù‡Ø°Ù‡ Ø§Ù„Ù…ÙŠØ²Ø© Ù‚ÙŠØ¯ Ø§Ù„ØªØ·ÙˆÙŠØ±`);
        }

        function editSeries(id) {
            alert(`ğŸš§ ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù…Ø³Ù„Ø³Ù„ ${id} - Ù‡Ø°Ù‡ Ø§Ù„Ù…ÙŠØ²Ø© Ù‚ÙŠØ¯ Ø§Ù„ØªØ·ÙˆÙŠØ±`);
        }

        function deleteSeries(id) {
            if (confirm('Ù‡Ù„ ØªØ±ÙŠØ¯ Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ù…Ø³Ù„Ø³Ù„ØŸ')) {
                adminManager.series = adminManager.series.filter(s => s.id !== id);
                adminManager.saveSeries();
                adminManager.loadSeriesList();
                adminManager.loadDashboard();
            }
        }

        // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØµÙ„Ø§Ø­ÙŠØ© Ø§Ù„Ù…Ø´Ø±Ù
        const currentUser = JSON.parse(localStorage.getItem('korvibe_currentUser') || 'null');
        if (!currentUser || !currentUser.isAdmin) {
            window.location.href = 'login.html';
        }
    </script>
</body>
</html>
